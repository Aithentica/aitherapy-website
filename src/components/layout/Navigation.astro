---
import { mainNavigation } from '../../data/navigation';
---

<nav class="flex items-center gap-1" aria-label="Nawigacja główna">
  {mainNavigation.map((item) => (
    item.children ? (
      <div class="relative group">
        <button
          type="button"
          class="flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 hover:text-sage-600 rounded-lg transition-colors"
        >
          {item.label}
          <svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
          </svg>
        </button>
        <div class="absolute top-full left-0 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
          <div class="bg-white rounded-xl shadow-lg border border-gray-100 py-2 min-w-48">
            {item.children.map((child) => (
              <a
                href={child.href}
                class="block px-4 py-2.5 text-sm text-gray-700 hover:text-sage-600 hover:bg-sage-50 transition-colors"
                {...(child.external ? { target: '_blank', rel: 'noopener noreferrer' } : {})}
              >
                {child.label}
              </a>
            ))}
          </div>
        </div>
      </div>
    ) : (
      <a
        href={item.href}
        class="px-3 py-2 text-sm font-medium text-gray-700 hover:text-sage-600 rounded-lg transition-colors"
        {...(item.external ? { target: '_blank', rel: 'noopener noreferrer' } : {})}
      >
        {item.label}
      </a>
    )
  ))}
</nav>
